{% extends 'base_generic.html' %}

{% block title %}
  <title>Quiz Question</title>
{% endblock %}

{% block content %}
  <div class="container">
    <h1>Quiz Question</h1>
    <form method="post" id="quizForm" action="{% url 'check_answer' %}">
      {% csrf_token %}
      <input type="hidden" name="question_id" value="{{ question.id }}">
      {{ form.as_p }}
      <button type="submit" class="btn btn-primary">Submit Answer</button>
    </form>
  </div>

  <script>
    // Get the start time and time limit from the session
    var startTime = new Date({{ request.session.start_time }});
    var timeLimit = parseInt("{{ request.session.time_limit }}", 10);
    console.log("Start Time: ", startTime);
    console.log("Time Limit: ", timeLimit);

    // Start a countdown timer
    var timer = setInterval(function() {
        // Calculate the elapsed time in seconds
        var elapsedTime = Math.floor((new Date() - startTime) / 1000);
        console.log("Elapsed Time: ", elapsedTime);

        // Check if the time limit has been exceeded
        if (elapsedTime >= timeLimit) {
            // If the time limit has been exceeded, clear the timer
            clearInterval(timer);

            // Automatically submit the quiz form
            document.getElementById("quizForm").submit();
        }
    }, 1000);
  </script>
{% endblock %}

